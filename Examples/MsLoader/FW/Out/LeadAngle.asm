;@M LeadAngle
;@S /home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas

Public mdl_ph2C_leadAngleController


.seg data
        Align 4
   FAngleErrorSum:       dd 0
   FLeadAngleSetpoint:   dd 0
   FAngleErrorKeep:      dd 0
   FFailureCode:         dd 0
   FRotSpeed:            dd 0

.seg code

;@P [Proc:~xh_{dai}:mdl_ph2C_leadAngleController#][ChTargList:~dai:AAngleDiff# ~dbi:BSpeedUpdate# ~dbi:BAngleError# ~dbi:BAngleErrorSum# ~dbi:BAngleErrorDiff# ~dei:BTmp0# ~dei:BTmp4# ~dei:BTmp7# ~dei:BTmp8# ][VarStackMap:~dai:AAngleDiff# 4 24 24 10000 ~dr_:Result# 0 0 16 10010 ~dbi:BSpeedUpdate# 4 0 0 00000 ~dbi:BAngleError# 4 0 0 00000 ~dbi:BAngleErrorSum# 4 0 0 00000 ~dbi:BAngleErrorDiff# 4 0 0 00000 ~dei:BTmp0# 4 0 0 00000 ~dei:BTmp4# 4 0 0 00000 ~dei:BTmp7# 4 0 0 00000 ~dei:BTmp8# 4 0 0 00000 ]
mdl_ph2C_leadAngleController:
        pushl    awx,ar,br,cr,dr  ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:46,6][Esp:-20][SrcOrig:]
                                  ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:46,6][Esp:0][SrcOrig:]
        mov      br,[FLeadAngleSetpoint] ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:47,44][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:0][JmpsPos:1][VarsPos:1][SRecPos:1][OrdrPos:1][MatrPos:1][UseMatr:.....d...][Esp:0][TargRegMap:  .   .   .   .   .  br   .   .   . ][SrcOrig:]BAngleError:=AAngleDiff-FLeadAngleSetpoint;
        mov      ar,[esp+24]      ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:47,44][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:1][JmpsPos:2][VarsPos:2][SRecPos:2][OrdrPos:2][MatrPos:2][UseMatr:d....|...][Esp:0][TargRegMap: ar   .   .   .   .  br   .   .   . ][SrcOrig:]BAngleError:=AAngleDiff-FLeadAngleSetpoint; [A:TProcUseMatr.WarnUsage]
        sub      ar,br            ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:47,44][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:2][JmpsPos:3][VarsPos:3][SRecPos:3][OrdrPos:3][MatrPos:4][UseMatr:..x..s...][Esp:0][TargRegMap:  .   .  ar   .   .  br   .   .   . ][SrcOrig:]BAngleError:=AAngleDiff-FLeadAngleSetpoint;
        cmp      ar,1820          ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:48,53][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:4][JmpsPos:5][VarsPos:4][SRecPos:4][OrdrPos:4][MatrPos:5][UseMatr:..s......][Esp:0][TargRegMap:  .   .  ar   .   .   .   .   .   . ][SrcOrig:]if BAngleError>( CAngleVariation*CDegreesToRadians) then BAngleError:= CAngleVariation*CDegreesToRadians;
        jse      mdl_ph2C_leadAngleController_X24 ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:48,53][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:5][JmpsPos:6][VarsPos:5][SRecPos:5][OrdrPos:5][MatrPos:6][UseMatr:..|......][Esp:0][TargRegMap:  .   .  ar   .   .   .   .   .   . ][SrcOrig:]if BAngleError>( CAngleVariation*CDegreesToRadians) then BAngleError:= CAngleVariation*CDegreesToRadians;
        mov      ar,1820          ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:48,106][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:8][JmpsPos:7][VarsPos:6][SRecPos:6][OrdrPos:6][MatrPos:7][UseMatr:..d......][Esp:0][TargRegMap:  .   .  ar   .   .   .   .   .   . ][SrcOrig:]if BAngleError>( CAngleVariation*CDegreesToRadians) then BAngleError:= CAngleVariation*CDegreesToRadians;
     mdl_ph2C_leadAngleController_X24: ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:48,106][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:10][JmpsPos:8][VarsPos:7][SRecPos:7][OrdrPos:7][MatrPos:8][UseMatr:..|......][Esp:0][TargRegMap:  .   .  ar   .   .   .   .   .   . ][SrcOrig:]if BAngleError>( CAngleVariation*CDegreesToRadians) then BAngleError:= CAngleVariation*CDegreesToRadians;
        cmp      ar,-1820         ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:49,53][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:12][JmpsPos:9][VarsPos:8][SRecPos:8][OrdrPos:8][MatrPos:9][UseMatr:..s......][Esp:0][TargRegMap:  .   .  ar   .   .   .   .   .   . ][SrcOrig:]if BAngleError<(-CAngleVariation*CDegreesToRadians) then BAngleError:=-CAngleVariation*CDegreesToRadians;
        jge      mdl_ph2C_leadAngleController_X25 ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:49,53][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:13][JmpsPos:10][VarsPos:9][SRecPos:9][OrdrPos:9][MatrPos:10][UseMatr:..|......][Esp:0][TargRegMap:  .   .  ar   .   .   .   .   .   . ][SrcOrig:]if BAngleError<(-CAngleVariation*CDegreesToRadians) then BAngleError:=-CAngleVariation*CDegreesToRadians;
        mov      ar,-1820         ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:49,106][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:16][JmpsPos:11][VarsPos:10][SRecPos:10][OrdrPos:10][MatrPos:11][UseMatr:..d......][Esp:0][TargRegMap:  .   .  ar   .   .   .   .   .   . ][SrcOrig:]if BAngleError<(-CAngleVariation*CDegreesToRadians) then BAngleError:=-CAngleVariation*CDegreesToRadians;
     mdl_ph2C_leadAngleController_X25: ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:49,106][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:18][JmpsPos:12][VarsPos:11][SRecPos:11][OrdrPos:11][MatrPos:12][UseMatr:..|......][Esp:0][TargRegMap:  .   .  ar   .   .   .   .   .   . ][SrcOrig:]if BAngleError<(-CAngleVariation*CDegreesToRadians) then BAngleError:=-CAngleVariation*CDegreesToRadians;
        mov      dr,[FAngleErrorSum] ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:51,44][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:20][JmpsPos:13][VarsPos:12][SRecPos:12][OrdrPos:12][MatrPos:13][UseMatr:..|d.....][Esp:0][TargRegMap:  .   .  ar  dr   .   .   .   .   . ][SrcOrig:]BAngleErrorSum:=FAngleErrorSum+BAngleError;
        add      dr,ar            ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:51,44][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:22][JmpsPos:15][VarsPos:13][SRecPos:13][OrdrPos:13][MatrPos:14][UseMatr:..sx.....][Esp:0][TargRegMap:  .   .  ar  dr   .   .   .   .   . ][SrcOrig:]BAngleErrorSum:=FAngleErrorSum+BAngleError;
        cmp      dr,67108864      ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:52,35][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:24][JmpsPos:17][VarsPos:14][SRecPos:14][OrdrPos:14][MatrPos:15][UseMatr:..|s.....][Esp:0][TargRegMap:  .   .  ar  dr   .   .   .   .   . ][SrcOrig:]if BAngleErrorSum>CAnglePidILimit then BAngleErrorSum:=CAnglePidILimit
        jse      mdl_ph2C_leadAngleController_IfElseA2_U7 ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:52,35][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:25][JmpsPos:18][VarsPos:15][SRecPos:15][OrdrPos:15][MatrPos:16][UseMatr:..||.....][Esp:0][TargRegMap:  .   .  ar  dr   .   .   .   .   . ][SrcOrig:]if BAngleErrorSum>CAnglePidILimit then BAngleErrorSum:=CAnglePidILimit
        mov      dr,67108864      ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:52,72][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:28][JmpsPos:19][VarsPos:16][SRecPos:16][OrdrPos:16][MatrPos:17][UseMatr:..|d.....][Esp:0][TargRegMap:  .   .  ar  dr   .   .   .   .   . ][SrcOrig:]if BAngleErrorSum>CAnglePidILimit then BAngleErrorSum:=CAnglePidILimit
        sjmp     mdl_ph2C_leadAngleController_X27 ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:52,72][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:29][JmpsPos:20][VarsPos:17][SRecPos:17][OrdrPos:17][MatrPos:18][UseMatr:..||.....][Esp:0][TargRegMap:  .   .  ar  dr   .   .   .   .   . ][SrcOrig:]if BAngleErrorSum>CAnglePidILimit then BAngleErrorSum:=CAnglePidILimit
     mdl_ph2C_leadAngleController_IfElseA2_U7: ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:52,72][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:30][JmpsPos:21][VarsPos:18][SRecPos:18][OrdrPos:18][MatrPos:19][UseMatr:..||.....][Esp:0][TargRegMap:  .   .  ar  dr   .   .   .   .   . ][SrcOrig:]if BAngleErrorSum>CAnglePidILimit then BAngleErrorSum:=CAnglePidILimit
        cmp      dr,zwx           ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:53,26][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:31][JmpsPos:22][VarsPos:19][SRecPos:19][OrdrPos:19][MatrPos:20][UseMatr:..|s.....][Esp:0][TargRegMap:  .   .  ar  dr   .   .   .   .   . ][SrcOrig:]else if BAngleErrorSum<0 then BAngleErrorSum:=0;
        jge      mdl_ph2C_leadAngleController_X27 ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:53,26][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:32][JmpsPos:23][VarsPos:20][SRecPos:20][OrdrPos:20][MatrPos:21][UseMatr:..||.....][Esp:0][TargRegMap:  .   .  ar  dr   .   .   .   .   . ][SrcOrig:]else if BAngleErrorSum<0 then BAngleErrorSum:=0;
        mov      dr,zwx           ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:53,49][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:35][JmpsPos:24][VarsPos:21][SRecPos:21][OrdrPos:21][MatrPos:22][UseMatr:..|d.....][Esp:0][TargRegMap:  .   .  ar  dr   .   .   .   .   . ][SrcOrig:]else if BAngleErrorSum<0 then BAngleErrorSum:=0;
     mdl_ph2C_leadAngleController_X27: ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:53,49][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:37][JmpsPos:25][VarsPos:22][SRecPos:22][OrdrPos:22][MatrPos:23][UseMatr:..||.....][Esp:0][TargRegMap:  .   .  ar  dr   .   .   .   .   . ][SrcOrig:]else if BAngleErrorSum<0 then BAngleErrorSum:=0;
        mov      cr,[FAngleErrorKeep] ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:55,46][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:40][JmpsPos:26][VarsPos:23][SRecPos:23][OrdrPos:23][MatrPos:24][UseMatr:..||..d..][Esp:0][TargRegMap:  .   .  ar  dr   .   .  cr   .   . ][SrcOrig:]BAngleErrorDiff:=BAngleError-FAngleErrorKeep;
        sub      br,ar,cr         ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:55,46][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:41][JmpsPos:27][VarsPos:24][SRecPos:24][OrdrPos:24][MatrPos:25][UseMatr:..s|d.|..][Esp:0][TargRegMap:  .   .  ar  dr  br   .  cr   .   . ][SrcOrig:]BAngleErrorDiff:=BAngleError-FAngleErrorKeep;
        mov      [FAngleErrorKeep],ar ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:56,30][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:44][JmpsPos:30][VarsPos:26][SRecPos:26][OrdrPos:26][MatrPos:27][UseMatr:..s||....][Esp:0][TargRegMap:  .   .  ar  dr  br   .   .   .   . ][SrcOrig:]FAngleErrorKeep:=BAngleError;
        cmp      br,2730          ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:57,36][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:45][JmpsPos:31][VarsPos:27][SRecPos:27][OrdrPos:27][MatrPos:28][UseMatr:..||s....][Esp:0][TargRegMap:  .   .  ar  dr  br   .   .   .   . ][SrcOrig:]if BAngleErrorDiff>CAnglePidDLimit then BAngleErrorDiff:=CAnglePidDLimit
        jse      mdl_ph2C_leadAngleController_IfElseA3_U13 ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:57,36][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:46][JmpsPos:32][VarsPos:28][SRecPos:28][OrdrPos:28][MatrPos:29][UseMatr:..|||....][Esp:0][TargRegMap:  .   .  ar  dr  br   .   .   .   . ][SrcOrig:]if BAngleErrorDiff>CAnglePidDLimit then BAngleErrorDiff:=CAnglePidDLimit
        mov      br,2730          ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:57,74][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:49][JmpsPos:33][VarsPos:29][SRecPos:29][OrdrPos:29][MatrPos:30][UseMatr:..||d....][Esp:0][TargRegMap:  .   .  ar  dr  br   .   .   .   . ][SrcOrig:]if BAngleErrorDiff>CAnglePidDLimit then BAngleErrorDiff:=CAnglePidDLimit
        sjmp     mdl_ph2C_leadAngleController_X29 ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:57,74][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:50][JmpsPos:34][VarsPos:30][SRecPos:30][OrdrPos:30][MatrPos:31][UseMatr:..|||....][Esp:0][TargRegMap:  .   .  ar  dr  br   .   .   .   . ][SrcOrig:]if BAngleErrorDiff>CAnglePidDLimit then BAngleErrorDiff:=CAnglePidDLimit
     mdl_ph2C_leadAngleController_IfElseA3_U13: ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:57,74][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:51][JmpsPos:35][VarsPos:31][SRecPos:31][OrdrPos:31][MatrPos:32][UseMatr:..|||....][Esp:0][TargRegMap:  .   .  ar  dr  br   .   .   .   . ][SrcOrig:]if BAngleErrorDiff>CAnglePidDLimit then BAngleErrorDiff:=CAnglePidDLimit
        cmp      br,-2730         ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:58,42][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:52][JmpsPos:36][VarsPos:32][SRecPos:32][OrdrPos:32][MatrPos:33][UseMatr:..||s....][Esp:0][TargRegMap:  .   .  ar  dr  br   .   .   .   . ][SrcOrig:]else if BAngleErrorDiff<-CAnglePidDLimit then BAngleErrorDiff:=-CAnglePidDLimit;
        jge      mdl_ph2C_leadAngleController_X29 ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:58,42][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:53][JmpsPos:37][VarsPos:33][SRecPos:33][OrdrPos:33][MatrPos:34][UseMatr:..|||....][Esp:0][TargRegMap:  .   .  ar  dr  br   .   .   .   . ][SrcOrig:]else if BAngleErrorDiff<-CAnglePidDLimit then BAngleErrorDiff:=-CAnglePidDLimit;
        mov      br,-2730         ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:58,81][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:56][JmpsPos:38][VarsPos:34][SRecPos:34][OrdrPos:34][MatrPos:35][UseMatr:..||d....][Esp:0][TargRegMap:  .   .  ar  dr  br   .   .   .   . ][SrcOrig:]else if BAngleErrorDiff<-CAnglePidDLimit then BAngleErrorDiff:=-CAnglePidDLimit;
     mdl_ph2C_leadAngleController_X29: ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:58,81][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:58][JmpsPos:39][VarsPos:35][SRecPos:35][OrdrPos:35][MatrPos:36][UseMatr:..|||....][Esp:0][TargRegMap:  .   .  ar  dr  br   .   .   .   . ][SrcOrig:]else if BAngleErrorDiff<-CAnglePidDLimit then BAngleErrorDiff:=-CAnglePidDLimit;
        mul      ar,80            ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:60,79][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:62][JmpsPos:41][VarsPos:37][SRecPos:37][OrdrPos:37][MatrPos:38][UseMatr:.x.||....][Esp:0][TargRegMap:  .  ar   .  dr  br   .   .   .   . ][SrcOrig:]BControllerY:=BAngleError*CKp_LA+BAngleErrorSum*CKi_LA+BAngleErrorDiff*CKd_LA;
        mul      cr,dr,2          ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:60,79][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:63][JmpsPos:42][VarsPos:38][SRecPos:38][OrdrPos:38][MatrPos:39][UseMatr:.|.s|..d.][Esp:0][TargRegMap:  .  ar   .  dr  br   .   .  cr   . ][SrcOrig:]BControllerY:=BAngleError*CKp_LA+BAngleErrorSum*CKi_LA+BAngleErrorDiff*CKd_LA;
        mul      br,5             ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:60,79][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:66][JmpsPos:45][VarsPos:41][SRecPos:41][OrdrPos:41][MatrPos:42][UseMatr:.|.|...|x][Esp:0][TargRegMap:  .  ar   .  dr   .   .   .  cr  br ][SrcOrig:]BControllerY:=BAngleError*CKp_LA+BAngleErrorSum*CKi_LA+BAngleErrorDiff*CKd_LA;
        add      ar,cr            ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:60,79][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:68][JmpsPos:47][VarsPos:42][SRecPos:42][OrdrPos:42][MatrPos:43][UseMatr:.x.|...s|][Esp:0][TargRegMap:  .  ar   .  dr   .   .   .  cr  br ][SrcOrig:]BControllerY:=BAngleError*CKp_LA+BAngleErrorSum*CKi_LA+BAngleErrorDiff*CKd_LA;
        add      ar,br            ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:60,79][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:70][JmpsPos:49][VarsPos:43][SRecPos:43][OrdrPos:43][MatrPos:44][UseMatr:.x.|....s][Esp:0][TargRegMap:  .  ar   .  dr   .   .   .   .  br ][SrcOrig:]BControllerY:=BAngleError*CKp_LA+BAngleErrorSum*CKi_LA+BAngleErrorDiff*CKd_LA;
        add      ar,2048          ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:61,76][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:73][JmpsPos:52][VarsPos:44][SRecPos:44][OrdrPos:44][MatrPos:45][UseMatr:.x.|.....][Esp:0][TargRegMap:  .  ar   .  dr   .   .   .   .   . ][SrcOrig:]BSpeedUpdate:=(BControllerY+(CAnglePidDivider div 2)) div CAnglePidDivider;
        sdiv     ar,4096          ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:61,76][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:75][JmpsPos:54][VarsPos:45][SRecPos:45][OrdrPos:45][MatrPos:46][UseMatr:.x.|.....][Esp:0][TargRegMap:  .  ar   .  dr   .   .   .   .   . ][SrcOrig:]BSpeedUpdate:=(BControllerY+(CAnglePidDivider div 2)) div CAnglePidDivider;
        cmp      ar,5500          ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:62,45][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:77][JmpsPos:56][VarsPos:46][SRecPos:46][OrdrPos:46][MatrPos:47][UseMatr:.s.|.....][Esp:0][TargRegMap:  .  ar   .  dr   .   .   .   .   . ][SrcOrig:]if BSpeedUpdate>(CMotorRotSpeedMaxRpm+1000) then
        jse      mdl_ph2C_leadAngleController_IfElseA4_U19 ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:62,45][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:78][JmpsPos:57][VarsPos:47][SRecPos:47][OrdrPos:47][MatrPos:48][UseMatr:.|.|.....][Esp:0][TargRegMap:  .  ar   .  dr   .   .   .   .   . ][SrcOrig:]if BSpeedUpdate>(CMotorRotSpeedMaxRpm+1000) then
        mov      ar,5500          ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:64,42][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:81][JmpsPos:58][VarsPos:48][SRecPos:48][OrdrPos:48][MatrPos:49][UseMatr:.d.|.....][Esp:0][TargRegMap:  .  ar   .  dr   .   .   .   .   . ][SrcOrig:]BSpeedUpdate:=CMotorRotSpeedMaxRpm+1000;
        push     zwx              ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:65,24][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:82][JmpsPos:59][VarsPos:49][SRecPos:49][OrdrPos:49][MatrPos:50][UseMatr:.|.|.....][Esp:0][TargRegMap:  .  ar   .  dr   .   .   .   .   . ][SrcOrig:]mdl_Ph2C_MotorStop(0);
        call     mdl_Ph2C_MotorStop ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:65,24][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:83][JmpsPos:60][VarsPos:50][SRecPos:50][OrdrPos:50][MatrPos:51][UseMatr:.|.|.....][Esp:4][TargRegMap:  .  ar   .  dr   .   .   .   .   . ][SrcOrig:]mdl_Ph2C_MotorStop(0);
        sjmp     mdl_ph2C_leadAngleController_X31 ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:66,6][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:85][JmpsPos:62][VarsPos:51][SRecPos:51][OrdrPos:51][MatrPos:52][UseMatr:.|.|.....][Esp:0][TargRegMap:  .  ar   .  dr   .   .   .   .   . ][SrcOrig:]end
     mdl_ph2C_leadAngleController_IfElseA4_U19: ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:66,6][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:86][JmpsPos:63][VarsPos:52][SRecPos:52][OrdrPos:52][MatrPos:53][UseMatr:.|.|.....][Esp:0][TargRegMap:  .  ar   .  dr   .   .   .   .   . ][SrcOrig:]end
        cmp      ar,150           ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:67,46][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:87][JmpsPos:64][VarsPos:53][SRecPos:53][OrdrPos:53][MatrPos:54][UseMatr:.s.|.....][Esp:0][TargRegMap:  .  ar   .  dr   .   .   .   .   . ][SrcOrig:]else if BSpeedUpdate<CMotorRotSpeedAbsMinRpm then BSpeedUpdate:=CMotorRotSpeedAbsMinRpm;
        jge      mdl_ph2C_leadAngleController_X31 ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:67,46][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:88][JmpsPos:65][VarsPos:54][SRecPos:54][OrdrPos:54][MatrPos:55][UseMatr:.|.|.....][Esp:0][TargRegMap:  .  ar   .  dr   .   .   .   .   . ][SrcOrig:]else if BSpeedUpdate<CMotorRotSpeedAbsMinRpm then BSpeedUpdate:=CMotorRotSpeedAbsMinRpm;
        mov      ar,150           ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:67,89][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:91][JmpsPos:66][VarsPos:55][SRecPos:55][OrdrPos:55][MatrPos:56][UseMatr:.d.|.....][Esp:0][TargRegMap:  .  ar   .  dr   .   .   .   .   . ][SrcOrig:]else if BSpeedUpdate<CMotorRotSpeedAbsMinRpm then BSpeedUpdate:=CMotorRotSpeedAbsMinRpm;
     mdl_ph2C_leadAngleController_X31: ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:67,89][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:93][JmpsPos:67][VarsPos:56][SRecPos:56][OrdrPos:56][MatrPos:57][UseMatr:.|.|.....][Esp:0][TargRegMap:  .  ar   .  dr   .   .   .   .   . ][SrcOrig:]else if BSpeedUpdate<CMotorRotSpeedAbsMinRpm then BSpeedUpdate:=CMotorRotSpeedAbsMinRpm;
        push     ar               ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:69,53][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:96][JmpsPos:68][VarsPos:57][SRecPos:57][OrdrPos:57][MatrPos:58][UseMatr:.s.|.....][Esp:0][TargRegMap:  .  ar   .  dr   .   .   .   .   . ][SrcOrig:]mdl_rsp_SetRotationalSpeedActualInRPM(BSpeedUpdate);
        call     mdl_rsp_SetRotationalSpeedActualInRPM ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:69,53][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:97][JmpsPos:69][VarsPos:58][SRecPos:58][OrdrPos:58][MatrPos:59][UseMatr:...|.....][Esp:4][TargRegMap:  .   .   .  dr   .   .   .   .   . ][SrcOrig:]mdl_rsp_SetRotationalSpeedActualInRPM(BSpeedUpdate);
        mov      [FAngleErrorSum],dr ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:71,32][ProcNameL:~xh_{dai}:mdl_ph2C_leadAngleController#][AtomPos:99][JmpsPos:71][VarsPos:59][SRecPos:59][OrdrPos:59][MatrPos:60][UseMatr:...s.....][Esp:0][TargRegMap:  .   .   .  dr   .   .   .   .   . ][SrcOrig:]FAngleErrorSum:=BAngleErrorSum;
                                  ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:72,4][Esp:0][SrcOrig:]
        popl     dr,cr,br,ar,awx  ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:72,4][Esp:-20][SrcOrig:]
        ret      4                ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:72,4][Esp:-20][SrcOrig:]

;@P [Proc:~xf_{dai}:mdl_Ph2C_MotorStop#][ChTargList:~dai:AFailureCode# ][VarStackMap:~dai:AFailureCode# 4 12 12 10000 ~dr_:Result# 0 0 4 10010 ]
mdl_Ph2C_MotorStop:
        pushl    awx,ar           ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:30,6][Esp:-8][SrcOrig:]
                                  ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:30,6][Esp:0][SrcOrig:]
        mov      ar,[esp+12]      ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:31,28][ProcNameL:~xf_{dai}:mdl_Ph2C_MotorStop#][AtomPos:0][JmpsPos:1][VarsPos:1][SRecPos:1][OrdrPos:1][MatrPos:1][UseMatr:d][Esp:0][TargRegMap: ar ][SrcOrig:]FFailureCode:=AFailureCode; [A:TProcUseMatr.WarnUsage]
        mov      [FFailureCode],ar ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:31,28][ProcNameL:~xf_{dai}:mdl_Ph2C_MotorStop#][AtomPos:0][JmpsPos:1][VarsPos:1][SRecPos:1][OrdrPos:1][MatrPos:2][UseMatr:s][Esp:0][TargRegMap: ar ][SrcOrig:]FFailureCode:=AFailureCode;
                                  ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:32,4][Esp:0][SrcOrig:]
        popl     ar,awx           ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:32,4][Esp:-8][SrcOrig:]
        ret      4                ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:32,4][Esp:-8][SrcOrig:]

;@P [Proc:~xf_{dai}:mdl_rsp_SetRotationalSpeedActualInRPM#][ChTargList:~dai:ARotSpeed# ][VarStackMap:~dai:ARotSpeed# 4 12 12 10000 ~dr_:Result# 0 0 4 10010 ]
mdl_rsp_SetRotationalSpeedActualInRPM:
        pushl    awx,ar           ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:35,6][Esp:-8][SrcOrig:]
                                  ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:35,6][Esp:0][SrcOrig:]
        mov      ar,[esp+12]      ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:36,22][ProcNameL:~xf_{dai}:mdl_rsp_SetRotationalSpeedActualInRPM#][AtomPos:0][JmpsPos:1][VarsPos:1][SRecPos:1][OrdrPos:1][MatrPos:1][UseMatr:d][Esp:0][TargRegMap: ar ][SrcOrig:]FRotSpeed:=ARotSpeed; [A:TProcUseMatr.WarnUsage]
        mov      [FRotSpeed],ar   ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:36,22][ProcNameL:~xf_{dai}:mdl_rsp_SetRotationalSpeedActualInRPM#][AtomPos:0][JmpsPos:1][VarsPos:1][SRecPos:1][OrdrPos:1][MatrPos:2][UseMatr:s][Esp:0][TargRegMap: ar ][SrcOrig:]FRotSpeed:=ARotSpeed;
                                  ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:37,4][Esp:0][SrcOrig:]
        popl     ar,awx           ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:37,4][Esp:-8][SrcOrig:]
        ret      4                ;[SrcFile:/home/ozh/smb/ZukH/Projects/Mirabelle/FW_Ldr/Src/LeadAngle.pas][SrcPos:37,4][Esp:-8][SrcOrig:]

